---
title: HTTP 메시지
categories:
- HTTP
tags: 
- 2021년 09월

last_modified_at: 2021-09-21T14:00:00+09:00
toc: true
---

HTTP가 인터넷의 배달원이라면, **HTTP 메시지는 무언가를 담아 보내는 소포와 같다**.  
이번에는 어떻게 메시지를 만들고 이해하는지에 대해 알아보자

## <span style="color:MediumSeaGreen">메시지의 흐름</span>
**HTTP 메시지는 HTTP 애플리케이션 간에 주고받은 데이터의 블록들이다**. 이 데이터의 블록들은 메시지의 내용과 의미를 설명하는 텍스트 메타 정보로 시작하고 그 다음에 선택적으로 데이터가 올 수 있다. 이 메시지는 클라이언트, 서버, 프락시 사이로 흐르며 '인바운드', '아웃바운드', '업스트림', '다운스트림'은 메시지의 방향을 의미하는 용어다.  
<br>

<span style="color:DodgerBlue">메시지는 원 서버 방향을 인바운드로 하여 송신된다.</span>  
HTTP는 **트랜잭션 방향을 표현하기 위해 인바운드와 아웃바운드라는 표현을 사용**한다.  
메시지가 원 서버로 향하는 것은 인바운드로 이동하는 것이고, 모든 처리가 끝난 뒤에 메시지가 사용자 에이전트로 돌아오는 것은 아웃바운드로 이동하는 것이다.  
<br>

<span style="color:DodgerBlue">다운스트림으로 흐르는 메시지</span>  
**요청 메시지냐 응답 메시지냐에 관계없이 모든 메시지는 다운스트림으로 흐른다**.  
메시지의 발송자는 수신자의 업스트림이다.  

***

## <span style="color:MediumSeaGreen">메시지의 각 부분</span>
**HTTP 메시지는 단순한 데이터의 구조화된 블록이다**. 각 메시지는 클라이언트로부터의 요청이나 서버로부터의 응답 중 하나를 포함하며, 메시지는 `시작줄, 헤더블록, 본문` 이렇게 세 부분으로 이루어진다.  

시작줄은 이것이 어떤 메시지인지 서술하며, 헤더 블록은 속성을, 본문은 데이터를 담거나 아예 없을 수도 있다.

<span style="color:DodgerBlue">메시지 문법</span>  
**모든 HTTP 메시지는 요청 메시지나 응답 메시지로 분류된다**.  
요청 메시지는 웹 서버에 어떤 동작을 요구하고, 응답 메시지는 요청의 결과를 클라이언트에게 돌려준다.  

- 요청 메시지 형식  

```
<메서드><요청URL><버전>
<헤더>

<엔터티 본문>
```
<br>
- 응답 메시지 형식  

```
<버전><상태코드><사유 구절>
<헤더>

<엔터티 본문>
```
<br>

<span style="color:DodgerBlue">메서드</span>  
**요청의 시작줄은 메서드로 시작하며, 클라이언트가 서버에게 무엇을 해야 하는지 말한다**.  

|메서드 방식|설명|메시지 본문(BODY) 여부|
|:------:|:---:|:---:|
|GET|서버에서 어떤 문서를 가져온다.|X|
|HEAD|서버에서 어떤 문서에 대해 헤더만 가져온다.|X|
|POST|서버가 처리해야 할 데이터를 보낸다.|O|
|PUT|서버에 요청 메시지의 본문을 저장한다.|O|
|TRACE|메시지가 프락시를 거쳐 서버에 도달하는 과정을 추적한다.|X|
|OPTIONS|서버가 어떤 메서드를 수행할 수 있는지 확인한다.|X|
|DELETE|서버에서 문서를 삭제한다.|X|

- 메서드에 대한 내용은 별도 포스팅에 다룰 예정.

<br>

<span style="color:DodgerBlue">요청 URL</span>  
**요청 대상이 되는 리소스를 지칭하는 완전한 URL 혹은 URL의 경로 구성요소다**. 완전한 URL이 아닌 URL의 경로 구성요소라고 해도, 클라이언트가 서버와 직접 대화하고 있고 경로 구성요소가 리소스를 가리키는 절대 경로이기만 하면 대체로 문제가 없다.  
<br>

<span style="color:DodgerBlue">상태 코드</span>  
**상태코드는 클라이언트에게 요청 중에 무엇이 일어났는지 설명하는 세 자리 숫자다**.  
상태 코드들은 세 자리 숫자로 된 그들의 코드 값을 기준으로 묶인다.
- 200에서 299까지의 상태 코드는 성공을 나타낸다.
- 300에서 399까지의 코드는 리소스가 옮겨졌음을 뜻한다.
- 400에서 499까지의 코드는 클라이언트가 뭔가 잘못된 요청을 했음을 의미한다.
- 500에서 599까지의 코드는 서버에서 뭔가 실패했음을 의미한다.  
<br>

<span style="color:DodgerBlue">사유 구절(reason-phrase)</span>  
**숫자로 된 상태 코드의 의미를 사람이 이해할 수 있게 설명해주는 짧은 문구로, 상태 코드 이후부터 줄바꿈 문자열까지가 사유 구절이다**.  
사유 구절은 오로지 사람에게 읽히기 위한 목적으로만 존재한다.  
<br>

<span style="color:DodgerBlue">헤더들</span>  
이름, 콜론(:), 선택적인 공백, 값, CRLF가 순서대로 나타나는 0개 이상의 헤더들, 이 헤더의 목록은 빈 줄(CRLF)로 끝나 헤더 목록의 끝과 엔터티 본문의 시작을 표시한다. HTTP/1.1과 같은 몇몇 버전의 HTTP는 요청이나 응답에 어떤 특정 헤더가 포함 되어야만 유효한 것으로 간주한다.  
<br>

<span style="color:DodgerBlue">엔터티 본문</span>  
엔터티 본문은 임의의 데이터 블록을 포함한다. 모든 메시지가 엔터티 본문을 갖는 것은 아니므로, 때때로 메시지는 그냥 CRLF으로 끝나게 된다. 헤더나 엔터티 본문이 없더라도 HTTP 헤더의 집합은 항상 빈 줄(CRLF)로 끝나야한다.

***

## <span style="color:MediumSeaGreen">시작줄</span>
**모든 HTTP 메시지는 시작줄로 시작한다**.  
요청 메시지의 시작줄은 무엇을 해야 하는지 말해주며, 응답 메시지의 시작줄은 무슨 일이 일어났는지 말해준다.  
<br>

<span style="color:DodgerBlue">요청줄</span>  
**요청 메시지는 서버에게 리소스에 대해 무언가를 해달라고 부탁한다**. 요청 메시지의 시작줄 또는 요청줄에는 서버에서 어떤 동작이 일어나야 하는지 설명해주는 메서드와 그 동작에 대하 대상을 지칭하는 요청 URL이 들어 있다. 또한 요청줄은 클라이언트가 어떤 HTTP 버전인지 서버에게 알려주는 HTTP 버전도 포함한다.  
<br>

<span style="color:DodgerBlue">응답줄</span>  
**응답 메시지는 수행 결과에 대한 상태 정보와 결과 데이터를 클라이언트에게 돌려준다**. 응답 메시지의 시작줄 또는 응답줄에는 응답 메시지에서 쓰인 HTTP의 버전, 숫자로 된 상태 코드, 수행 상태에 대해 설명해주는 텍스트로 된 사유구절이 포함된다.  

<br>

***
<span style="color:DarkOrange">reference</span>  
데이빗 고울리·브라이언 토티·마조리 세이어·세일루 레디·안슈 아가왈. (2014). HTTP 완벽 가이드. 프로그래밍인사이트









