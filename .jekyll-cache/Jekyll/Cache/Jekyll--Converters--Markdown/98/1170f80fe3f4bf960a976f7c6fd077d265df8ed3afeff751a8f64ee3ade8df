I"œ:<p>ìŠ¤í”„ë§ì€ ê¸°ë³¸ì ì¸ ë©”ì‹œì§€ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.<br />
ë©”ì‹œì§€ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” <code class="language-plaintext highlighter-rouge">MessageSource</code>ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ë˜ëŠ”ë°, <code class="language-plaintext highlighter-rouge">MessageSourceëŠ” ì¸í„°í˜ì´ìŠ¤</code>ì´ë‹¤.<br />
ë”°ë¼ì„œ <strong>êµ¬í˜„ì²´ì¸ ResourceBundleMessageSource ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡</strong>í•˜ë©´ ëœë‹¤.</p>

<h2 id="ìŠ¤í”„ë§-ë©”ì‹œì§€-ì†ŒìŠ¤-ì§ì ‘-ë“±ë¡"><span style="color:MediumSeaGreen">ìŠ¤í”„ë§ ë©”ì‹œì§€ ì†ŒìŠ¤ ì§ì ‘ ë“±ë¡</span></h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">MessageSource</span> <span class="nf">messageSource</span><span class="o">()</span> <span class="o">{</span>
	<span class="nc">ResourceBundleMessageSource</span> <span class="n">messageSource</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ResourceBundleMessageSource</span><span class="o">();</span>
	<span class="n">messageSource</span><span class="o">.</span><span class="na">setBasenames</span><span class="o">(</span><span class="s">"messages"</span><span class="o">,</span> <span class="s">"errors"</span><span class="o">);</span>
	<span class="n">messageSource</span><span class="o">.</span><span class="na">setDefaultEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
	<span class="k">return</span> <span class="n">messageSource</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">basenames</code> : ì„¤ì • íŒŒì¼ì˜ ì´ë¦„ì„ ì§€ì •í•œë‹¤.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">messages</code>ë¡œ ì§€ì •í•˜ë©´ <code class="language-plaintext highlighter-rouge">messages.properties</code>íŒŒì¼ì„ ì½ì–´ì„œ ì‚¬ìš©í•œë‹¤.</li>
      <li>ì¶”ê°€ë¡œ êµ­ì œí™” ê¸°ëŠ¥ì„ ì ìš©í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">messages_en.properties</code>, <code class="language-plaintext highlighter-rouge">messages_ko.properties</code>ì™€ ê°™ì´ íŒŒì¼ëª… ë§ˆì§€ë§‰ì— ì–¸ì–´ ì •ë³´ë¥¼ ì£¼ë©´ëœë‹¤. ë§Œì•½ ì°¾ì„ ìˆ˜ ìˆëŠ” êµ­ì œí™” íŒŒì¼ì´ ì—†ìœ¼ë©´ <code class="language-plaintext highlighter-rouge">messages.properties</code>(ì–¸ì–´ì •ë³´ê°€ ì—†ëŠ” íŒŒì¼ëª…)ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.</li>
      <li>íŒŒì¼ì˜ ìœ„ì¹˜ëŠ” <code class="language-plaintext highlighter-rouge">/resources/messages.properties</code>ì— ë‘ë©´ ëœë‹¤.</li>
      <li>ì—¬ëŸ¬ íŒŒì¼ì„ í•œë²ˆì— ì§€ì •í•  ìˆ˜ ìˆë‹¤. ìœ„ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">messages</code>, <code class="language-plaintext highlighter-rouge">errors</code> ë‘˜ì„ ì§€ì •í–ˆë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">defaultEncoding</code> : ì¸ì½”ë”© ì •ë³´ë¥¼ ì§€ì •í•œë‹¤. <code class="language-plaintext highlighter-rouge">utf-8</code>ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.<br />
<br /></li>
</ul>

<p style="color:Red">ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ MessageSourceë¥¼ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.(ì§ì ‘ ë“±ë¡ ì•ˆ í•´ë„ ë¨.)</p>

<hr />

<h2 id="ìŠ¤í”„ë§ë¶€íŠ¸-ë©”ì‹œì§€-ì†ŒìŠ¤-ì‚¬ìš©í•˜ê¸°"><span style="color:MediumSeaGreen">ìŠ¤í”„ë§ë¶€íŠ¸ ë©”ì‹œì§€ ì†ŒìŠ¤ ì‚¬ìš©í•˜ê¸°</span></h2>
<p>ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ <code class="language-plaintext highlighter-rouge">application.properties</code>íŒŒì¼ì— ë©”ì‹œì§€ ì†ŒìŠ¤ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">spring</span><span class="o">.</span><span class="na">messages</span><span class="o">.</span><span class="na">basename</span><span class="o">=</span><span class="n">messages</span><span class="o">,</span><span class="n">config</span><span class="o">.</span><span class="na">i18n</span><span class="o">.</span><span class="na">messages</span>
</code></pre></div></div>

<p><br /></p>

<p><strong>ìŠ¤í”„ë§ ë¶€íŠ¸ ë©”ì‹œì§€ ì†ŒìŠ¤ ê¸°ë³¸ ê°’</strong><br />
<code class="language-plaintext highlighter-rouge">spring.messages.basename=messages</code></p>

<p><code class="language-plaintext highlighter-rouge">MessageSource</code>ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ì§€ ì•Šê³ , ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ ê´€ë ¨ëœ ë³„ë„ì˜ ì„¤ì •ì„ í•˜ì§€ ì•Šìœ¼ë©´ <code class="language-plaintext highlighter-rouge">messages</code>ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ <strong>ê¸°ë³¸ ë“±ë¡</strong>ëœë‹¤.<br />
ë”°ë¼ì„œ <code class="language-plaintext highlighter-rouge">messages_en.properties</code>, <code class="language-plaintext highlighter-rouge">messages_ko.properties</code>, <code class="language-plaintext highlighter-rouge">messages.properties</code>íŒŒì¼ë§Œ ë“±ë¡í•˜ë©´ ìë™ìœ¼ë¡œ ì¸ì‹ëœë‹¤.</p>

<hr />

<h2 id="ë©”ì‹œì§€-íŒŒì¼-ë§Œë“¤ê¸°"><span style="color:MediumSeaGreen">ë©”ì‹œì§€ íŒŒì¼ ë§Œë“¤ê¸°</span></h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">messages.properties</code> : ê¸°ë³¸ ê°’ìœ¼ë¡œ ì‚¬ìš©(í•œê¸€)</li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">messages_en.properties</code> : ì˜ì–´ êµ­ì œí™” ì‚¬ìš©</p>
  </li>
  <li><strong>íŒŒì¼ëª…ì€ massageê°€ ì•„ë‹ˆë¼ messagesë‹¤. ë§ˆì§€ë§‰ sì— ì£¼ì˜í•˜ì</strong>
<code class="language-plaintext highlighter-rouge">/resources/messages.properties</code></li>
</ul>

<p><strong>messages.properties</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">hello</span><span class="o">=</span><span class="n">ì•ˆë…•</span>
<span class="n">hello</span><span class="o">.</span><span class="na">name</span><span class="o">=</span><span class="n">ì•ˆë…•</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</code></pre></div></div>

<p><strong>messages_en.properties</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">hello</span><span class="o">=</span><span class="n">hello</span>
<span class="n">hello</span><span class="o">.</span><span class="na">name</span><span class="o">=</span><span class="n">hello</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="ìŠ¤í”„ë§-ë©”ì‹œì§€-ì†ŒìŠ¤-ì‚¬ìš©"><span style="color:MediumSeaGreen">ìŠ¤í”„ë§ ë©”ì‹œì§€ ì†ŒìŠ¤ ì‚¬ìš©</span></h2>

<p><strong>MessageSource ì¸í„°í˜ì´ìŠ¤</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MessageSource</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">getMessage</span><span class="o">(</span><span class="nc">String</span> <span class="n">code</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">String</span> <span class="n">defaultMessage</span> <span class="nc">Locale</span> <span class="n">locale</span><span class="o">);</span>
    <span class="nc">String</span> <span class="nf">getMessage</span><span class="o">(</span><span class="nc">String</span> <span class="n">code</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nc">Locale</span> <span class="n">locale</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">NoSuchMessageException</span><span class="o">;</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">MessgaeSource</code>ì¸í„°í˜ì´ìŠ¤ë¥¼ ë³´ë©´ ì½”ë“œë¥¼ í¬í•¨í•œ ì¼ë¶€ íŒŒë¼ë¯¸í„°ë¡œ ë©”ì‹œì§€ë¥¼ ì½ì–´ì˜¤ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.</p>

<p><br /></p>

<p><strong>ë©”ì‹œì§€ ì†ŒìŠ¤ í…ŒìŠ¤íŠ¸ ì½”ë“œ</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">hello.itemservice.message</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">assertj</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">AssertionsForInterfaceTypes</span><span class="o">.</span><span class="na">assertThat</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.MessageSource</span><span class="o">;</span>

<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageSourceTest</span> <span class="o">{</span>

  <span class="nd">@Autowired</span>
  <span class="nc">MessageSource</span> <span class="n">messageSource</span><span class="o">;</span> <span class="c1">// ìŠ¤í”„ë§ë¶€íŠ¸ ìë™ ë“±ë¡</span>

  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">helloMessage</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">messageSource</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="s">"hello"</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"ì•ˆë…•"</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<p><strong>í…ŒìŠ¤íŠ¸ ê²°ê³¼</strong>
<img src="/assets/images/spring/messages1.png" alt="img.png" /></p>

<ul>
  <li>ms.getMessage(â€œhelloâ€, null, null)
    <ul>
      <li>code: hello</li>
      <li>args: null</li>
      <li>locale: null</li>
    </ul>
  </li>
</ul>

<p>í…ŒìŠ¤íŠ¸ëŠ” ë©”ì‹œì§€ ì½”ë“œë¡œ helloë¥¼ ì…ë ¥í•˜ê³  ë‚˜ë¨¸ì§€ ê°’ì€ nullì„ ì…ë ¥í–ˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">locale</code>ì •ë³´ê°€ ì—†ìœ¼ë©´ <code class="language-plaintext highlighter-rouge">basename</code>ì—ì„œ ì„¤ì •í•œ ê¸°ë³¸ ì´ë¦„ ë©”ì‹œì§€ íŒŒì¼ì„ ì¡°íšŒí•œë‹¤.<br />
<code class="language-plaintext highlighter-rouge">basename</code>ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">messages</code>ë¥¼ ì§€ì • í–ˆìœ¼ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">messages.properties</code> íŒŒì¼ì—ì„œ ë°ì´í„° ì¡°íšŒí•œë‹¤.</p>

<p><br /></p>

<p><strong>ë©”ì‹œì§€ ì†ŒìŠ¤ í…ŒìŠ¤íŠ¸ ì½”ë“œ(ë§¤ê°œë³€ìˆ˜ ì‚¬ìš©)</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">argumentMessage</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">messageSource</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="s">"hello.name"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"Spring"</span><span class="o">},</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"ì•ˆë…• Spring"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>í…ŒìŠ¤íŠ¸ ê²°ê³¼</strong>
<img src="/assets/images/spring/messages2.png" alt="img.png" /></p>

<ul>
  <li>ë‹¤ìŒ ë©”ì‹œì§€ì˜ {0} ë¶€ë¶„ì€ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•´ì„œ ì¹˜í™˜í•  ìˆ˜ ìˆë‹¤.</li>
  <li>hello.name=ì•ˆë…• -&gt; {0} Spring ë‹¨ì–´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ -&gt; ì•ˆë…• Spring</li>
</ul>

<hr />

<h2 id="êµ­ì œí™”"><span style="color:MediumSeaGreen">êµ­ì œí™”</span></h2>
<ul>
  <li>localeì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ­ì œí™” íŒŒì¼ì„ ì„ íƒí•œë‹¤.</li>
  <li>Localeì´ <code class="language-plaintext highlighter-rouge">en_US</code>ì˜ ê²½ìš° <code class="language-plaintext highlighter-rouge">messages_en_US</code> -&gt; <code class="language-plaintext highlighter-rouge">messages_en</code> -&gt; <code class="language-plaintext highlighter-rouge">messages</code> ìˆœì„œë¡œ ì°¾ëŠ”ë‹¤.</li>
  <li>Localeì— ë§ì¶”ì–´ êµ¬ì²´ì ì¸ ê²ƒì´ ìˆìœ¼ë©´ êµ¬ì²´ì ì¸ ê²ƒì„ ì°¾ê³ , ì—†ìœ¼ë©´ ë””í´íŠ¸ë¥¼ ì°¾ëŠ”ë‹¤.</li>
</ul>

<p><strong>Default êµ­ì œí™” í…ŒìŠ¤íŠ¸ ì½”ë“œ</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">defaultLang</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">messageSource</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="s">"hello"</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"ì•ˆë…•"</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">messageSource</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="s">"hello"</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="nc">Locale</span><span class="o">.</span><span class="na">KOREA</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"ì•ˆë…•"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>í…ŒìŠ¤íŠ¸ ê²°ê³¼</strong>
<img src="/assets/images/spring/messages3.png" alt="img.png" /></p>

<ul>
  <li>ms.getMessage(â€œhelloâ€, null, null) : locale ì •ë³´ê°€ ì—†ìœ¼ë¯€ë¡œ messages ë¥¼ ì‚¬ìš©</li>
  <li>ms.getMessage(â€œhelloâ€, null, Locale.KOREA) : locale ì •ë³´ê°€ ìˆì§€ë§Œ, message_koê°€ ì—†ìœ¼ë¯€ë¡œ messages ë¥¼ ì‚¬ìš©</li>
</ul>
:ET